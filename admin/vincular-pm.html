<!doctype html>
<html lang="pt-br">

<head>
  <!-- Codificação -->
  <meta charset="utf-8" />

  <!-- Responsividade no celular -->
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Título -->
  <title>Vincular PM à Patrulha - Operação Carnaval</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />

  <!-- CSS do projeto -->
  <link rel="stylesheet" href="../css/estilos.css" />
</head>

<body>
  <!-- Conteúdo principal -->
  <main class="container py-4">
    <!-- Limita largura como nas outras telas -->
    <div class="mx-auto conteudo-largura">

      <!-- Cabeçalho com brasões -->
      <header class="cabecalho-interno">
        <!-- Brasão PMESP (canto esquerdo) -->
        <img src="../img/pmesp.png" class="brasao brasao-pmesp" alt="Brasão da PMESP" />

        <!-- Brasão 4º BPM/M (canto direito) -->
        <img src="../img/4bpmm.png" class="brasao brasao-4bpmm" alt="Brasão do 4º BPM/M" />
      </header>

      <!-- Card principal -->
      <section class="card shadow-sm">
        <div class="card-body p-4">

          <!-- Título -->
          <div class="d-flex flex-wrap align-items-start justify-content-between gap-2 mb-3">
            <div>
              <h1 class="h5 mb-1">Vincular PM à Patrulha</h1>
              <p class="text-body-secondary mb-0">
                Defina horário e selecione os policiais que compõem a patrulha.
              </p>
            </div>

            <!-- Identificação da patrulha (preenchida via JS) -->
            <div class="text-end">
              <div class="badge text-bg-secondary" id="badgePatrulha">Patrulha --</div>
            </div>
          </div>

          <!-- Horário de início / término -->
          <div class="row g-3 mb-3">
            <div class="col-12 col-sm-6">
              <label for="horaInicio" class="form-label">Horário de início</label>
              <input type="time" class="form-control" id="horaInicio" name="horaInicio" required />
              <div class="invalid-feedback">Informe o horário de início.</div>
            </div>

            <div class="col-12 col-sm-6">
              <label for="horaFim" class="form-label">Horário de término</label>
              <input type="time" class="form-control" id="horaFim" name="horaFim" required />
              <div class="invalid-feedback">Informe o horário de término.</div>
            </div>
          </div>

          <!-- Layout responsivo:
               - Mobile: composição primeiro, depois pesquisa/lista
               - Desktop: composição na direita e lista na esquerda -->
          <div class="row g-3">

            <!-- COMPOSIÇÃO (no mobile fica em cima; no desktop fica à direita) -->
            <div class="col-12 col-lg-5 order-1 order-lg-2">
              <div class="border rounded p-3 bg-dark-subtle overflow-hidden">

                <!-- Cabeçalho da composição -->
                <div class="d-flex align-items-center gap-2 flex-wrap mb-2">
                  <strong class="me-auto">Composição da Patrulha</strong>

                  <!-- Remove selecionados da composição -->
                  <button type="button" class="btn btn-outline-danger btn-sm text-wrap ms-auto w-100 w-sm-auto"
                    id="btnRemoverSelecionados">
                    Remover selecionados
                  </button>
                </div>

                <!-- Lista da composição (rolável) -->
                <div class="lista-rolavel" id="listaComposicao">
                  <!-- Itens inseridos via JS -->
                </div>

                <!-- Mensagem quando vazio -->
                <div class="text-body-secondary small mt-2" id="msgComposicaoVazia">
                  Nenhum PM adicionado ainda.
                </div>
              </div>
            </div>


            <!-- PESQUISA + LISTA (no mobile fica embaixo; no desktop fica à esquerda) -->
            <div class="col-12 col-lg-7 order-2 order-lg-1">
              <div class="border rounded p-3">

                <!-- Pesquisa por RE -->
                <label for="filtroRe" class="form-label">Pesquisar por RE (sem dígito)</label>

                <div class="input-group mb-3">
                  <!-- Campo de RE -->
                  <input type="text" class="form-control" id="filtroRe" inputmode="numeric" maxlength="6"
                    placeholder="Digite 6 dígitos..." aria-label="Pesquisar por RE" />

                  <!-- Botão limpar filtro -->
                  <button class="btn btn-outline-secondary" type="button" id="btnLimparFiltro">
                    Limpar
                  </button>
                </div>

                <!-- Aviso pequeno -->
                <div class="text-body-secondary small mb-2" id="statusLista">
                  Mostrando todos os PMs cadastrados.
                </div>

                <!-- Lista de PMs (rolável) -->
                <div class="lista-rolavel" id="listaPms">
                  <!-- Itens inseridos via JS -->
                </div>

                <!-- Mensagem quando não houver PM -->
                <div class="text-body-secondary small mt-2 d-none" id="msgSemPms">
                  Nenhum PM cadastrado ainda.
                </div>

              </div>
            </div>

          </div>

          <!-- Botões inferiores -->
          <div class="d-flex gap-2 mt-4">
            <!-- Adicionar selecionados -->
            <button type="button" class="btn btn-primary btn-lg flex-grow-1" id="btnAdicionar">
              Adicionar
            </button>

            <!-- Cancelar (limpa seleção e filtro) -->
            <button type="button" class="btn btn-secondary btn-lg" id="btnCancelar">
              Cancelar
            </button>

            <!-- Sair (volta para listagem de patrulhas) -->
            <button type="button" class="btn btn-outline-secondary btn-lg" id="btnSair">
              Sair
            </button>
          </div>

          <!-- Rodapé -->
          <p class="text-center text-body-secondary small mt-3 mb-0">
            PMESP • Vincular PM à Patrulha
          </p>

        </div>
      </section>
    </div>
  </main>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>

  <!-- JS da tela -->
  <script src="js/ordenacao.js"></script>
  <script type="module" src="js/vincular-pm.js"></script>

  <!-- Uppercase global (não afeta RE por ser numérico) -->
  <script src="js/uppercase.js"></script>
  <script type="module" src="../js/guard-admin.js"></script>
</body>

</html>
<!-- Commit de verificação geral -->