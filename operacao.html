<!doctype html>
<html lang="pt-br">

<head>
  <!-- Codificação -->
  <meta charset="utf-8" />

  <!-- Responsividade (celular) -->
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Título -->
  <title>Minha Escala - Operação Carnaval</title>

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous" />

  <!-- CSS do projeto -->
  <link rel="stylesheet" href="css/estilos.css" />
</head>

<body>
  <!-- Conteúdo principal -->
  <main class="container py-4">
    <!-- Largura controlada (igual suas telas) -->
    <div class="mx-auto conteudo-largura">

      <!-- Cabeçalho com brasões (um em cada lado) -->
      <header class="cabecalho-interno">
        <!-- Brasão PMESP (esquerda) -->
        <img src="img/pmesp.png" class="brasao brasao-pmesp" alt="Brasão da PMESP" />

        <!-- Brasão 4º BPM/M (direita) -->
        <img src="img/4bpmm.png" class="brasao brasao-4bpmm" alt="Brasão do 4º BPM/M" />
      </header>

      <!-- Card principal -->
      <section class="card shadow-sm">
        <div class="card-body p-4">

          <!-- Título -->
          <div class="d-flex align-items-start justify-content-between gap-2 mb-3">
            <div>
              <h1 class="h5 mb-1">Dados da Operação</h1>
              <p class="text-body-secondary mb-0">
                Informações do seu patrulhamento na Operação Carnaval.
              </p>
            </div>

            <!-- Badge com o RE (preenchido via JS) -->
            <div class="text-end">
              <span class="badge text-bg-secondary" id="badgeRe">RE --</span>
            </div>
          </div>

          <!-- Área de mensagem (erros/avisos) -->
          <div id="mensagem" class="alert alert-warning d-none" role="alert"></div>

          <!-- Conteúdo (aparece quando encontrar patrulha) -->
          <div id="conteudo" class="d-none">

            <!-- Horário da escala -->
            <div class="mb-3">
              <div class="fw-semibold">Horário da Escala</div>
              <div id="txtHorario" class="fs-6">
                das --:-- às --:--
              </div>
            </div>

            <!-- Patrulha -->
            <div class="mb-3">
              <div id="txtPatrulha" class="fs-5">
                Patrulha --
              </div>
            </div>

            <!-- Composição da Patrulha -->
            <div class="mt-4">
              <h5 class="fw-bold">Composição da Patrulha</h5>

              <ul id="listaComposicaoPatrulha" class="list-group mb-2"></ul>

              <p id="msgSemComposicao" class="text-muted d-none">
                Nenhum policial vinculado a esta patrulha.
              </p>
            </div>



            <!-- CPP -->
            <div class="mb-3">
              <div class="fw-semibold">CPP</div>
              <div id="txtCpp" class="text-break">
                --
              </div>
            </div>

            <!-- Missão -->
            <div class="mb-4">
              <div class="fw-semibold">Missão</div>
              <div id="txtMissao" class="text-break">
                --
              </div>
            </div>

            <!-- Mapa (no final) -->
            <div class="mb-2">
              <div class="fw-semibold">Mapa</div>
            </div>

            <!-- Container do mapa (rolável e responsivo) -->
            <div class="mapa-preview-wrapper">
              <iframe id="mapaIframe" class="mapa-preview" src="" loading="lazy"
                referrerpolicy="no-referrer-when-downgrade" title="Mapa do patrulhamento"></iframe>
            </div>

            <!-- Mensagem se não houver mapa -->
            <div id="mapaVazio" class="text-body-secondary small mt-2 d-none">
              Mapa não informado.
            </div>

          </div>

          <!-- Botões inferiores -->
          <div class="d-flex gap-2 mt-4">
            <!-- Voltar para a tela inicial -->
            <button type="button" class="btn btn-secondary btn-lg flex-grow-1" id="btnVoltar">
              Voltar
            </button>
          </div>

          <!-- Rodapé -->
          <p class="text-center text-body-secondary small mt-3 mb-0">
            PMESP • Operação Carnaval
          </p>

        </div>
      </section>
    </div>
  </main>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>

  <!-- JS da tela -->
  <script type="module" src="js/operacao.js"></script>
</body>

</html>
<!-- Commit de verificação geral -->